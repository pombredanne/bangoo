{% extends 'admin/base.html' %}
{% load bootstrap_form_fields %}
{% load i18n %}
{% load static %}

{% block head %}
    {{ block.super }}
    <link href="{% theme_static 'redactor/redactor.css' %}" rel="stylesheet" type="text/css">

    <script src="{% theme_static 'redactor/redactor.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'admin/js/blog/post.js' %}" type="text/javascript"></script>
    <script>
        angular.module('bangoo.blog.post').factory('redactorOptions', function(){
            return {
                buttonSource: true,
                paragraphize: false,
                replaceDivs: false
            }
        });
    </script>
{% endblock %}
{% block content %}
    <div ng-app="bangoo.blog.post" ng-cloak>
        <form ng-controller="BangooBlogPostController as post" novalidate action="{% url 'api:post-api' post_id %}" ng-submit="post.submit($event)">
            <div class="row">
                <div class="col-md-10">
                    {% bootstrap_field form.title 'data.title' 'errors.title'%}
                    {% redactor_field form.content 'data.content' 'errors.content' %}
                </div>
                <div class="col-md-2">
                    {% comment %}
                    TODO: TagWidget is not implemented
                    {% bootstrap_field form.tags 'data.tags' 'errors.tags' %}
                    {% endcomment %}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <input type="submit" class="btn btn-primary" style="float: right" value="{% trans 'Publish' %}">
                    <input type="submit" class="btn" style="float: right; margin-right: 4px" value="{% trans 'Save as draft' %}">
                </div>
            </div>
            <pre>
[[ data|json ]]
            </pre>
        </form>
    </div>
{% endblock %}